
<html>

<head>

    <meta charset="UTF-8">
    <style>
   *:focus {
    outline: 0 !important;
    }

       #heatmap{
        width: 90%;
        height:90%;        
    }

        #cesiumContainer {

            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000000;
}
.cesium-viewer{
position: absolute;
}
    </style>

    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <!-- Make the app on mobile take up the full browser screen and disable user scaling. -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>Smart City</title>
    <!-- The Cesium library. -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- weather icons -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.min.css">
    <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAykBBxucwUKbwJkXtToreK3iQVHj8quHE&libraries=StreetViewPanorama"></script>  

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    

<!-- <script type='text/javascript' src='https://darksky.net/widget/graph/30.5898,-96.2946/us12/en.js?width=100%&height=320&title=college station&textColor=333333&bgColor=FFFFFF&z-index=1&transparency=false&fontFamily=Default&customFont=&units=us&graph=temperature_graph&timeColor=333333&tempColor=333333&lineColor=333333&markerColor=333333'></script> -->
</head>

<body>
<div id="cesiumContainer"></div>
<div class="cesium-viewer-bottom1" style="left: 15%; bottom: 30px;"><div class="cesium-widget-credits"><div class="cesium-credit-logoContainer" style="display: inline;"><div style="display: inline;"><a href="https://cesium.com/" target="_blank"><img title="Cesium ion" src="./images/test1.png" height="100" width="100"></a>
            </div></div></div></div>

<div id="heatmap" display="none"></div>
    <div class="jumbotron">
    <h3>Disaster management</h3> 
    <label class="container_t">flood<input type="checkbox"  name="flood object" id="x"/><span class="checkmark"></span>
</label>

<label class="container_t">blackout<input type="checkbox"  name="power object" id="y"/><span class="checkmark"></span>
</label>

<hr />
<fieldset class="scheduler-border">
<legend class="scheduler-border">Map legend</legend>
    <ul id="legend_list" style="list-style-type:none">           
            <li><div class="dot blue"></div>
            <div><label for="myid1">reported object</label></div></li>
            <li data-type='flood object'><div class="foo purple">
            </div><label for="myid2">Wire</label></li>
            <li data-type='flood object' ><div class="foo purple">
            </div><label for="myid2">Substation</label></li>
            <li data-type='flood object'><div class="dot green"></div>
            <label for="myid2">Utility pole</label></li>
            <li data-type='power object' ><div class="dot white"></div>
            <div><label for="myid2">Inlet</label></div></li>
    </ul>
</fieldset>

</div>
<div class="back text-center" id = "other">
     <h5>Weather Infomation</h5>
        <div class="container" id="flood">       
        <div class="row">
            <div class="weather-head">
                <h8 id="location" class="text-center">Houston, US</h8>
                <div class="row">                           
                    <div id="description" class="description col-6 text-center">
                        <i id="icon-desc" class="wi wi-owm-200"></i>
                        <p class="desc">thunderstorm</p>            
                    </div>
                    <div id="temperature" class="col-6 text-center">
                    60<i id="icon-thermometer" class="wi wi-thermometer"></i>                  
                    </div>  
                </div>
                <div class="weather-body">
                    <div class="row">
                        <div class="humidity col-4 text-center">
                            <i class="wi wi-raindrop"></i><span> Humidity</span>
                        </div>
                        <div class="wind col-4 text-center">
                            <i class="wi wi-strong-wind"></i><span> Wind Speed</span>
                        </div>
                        <div class="visibility col-4 text-center">
                            <i class="fa fa-eye"></i><span> Visibility</span>
                        </div>              
                    </div>
                    <div class="row">
                        <div id="humidity" class="humidity-data col-4 text-center">75%</div>
                        <div id="wind" class="wind-data col-4 text-center">34mph</div>
                        <div id="visibility" class="degree-data col-4 text-center">235</div>
                    </div>
                    <div class="row">
                        <div id="time" class="humidity-data col-12 text-center">
                            Time
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
</div>
<div id="heatmap" v-show="false"></div>
<div class="PowerC hide1" >
    <div id="PowerC1">
        <div class ="back" id="back2">
            <h5>Wind Speed</h5>
            <div class="slidecontainer">
            <input type="range" min="0" max="255" value="0" class="slider" id="myRange">
            <p>Current windspeed: <span id="demo"></span></p>
            </div>
        </div>
    </div>
</div>

<div class="showme hide">
    <div id="showme1">
        <div class ="back" id="back2">
            <h5>Current Rainfall</h5>
            <div class="slidecontainer">
                <input type="range" min="0" max="255" value="0" class="slider" id="myRange1">
                <p>Current Rainfall: <span id="demo1"></span></p>
            </div>
        </div>
    </div>
</div>

</div>
    <div class="dialog" id="dialog1" title="Display all the pictures"></div>
    <div class="dialog" id="dialog2" title="Google street view">
        <div id="pano" style="width: 50%; height: 100%;float:left"></div>
        <div id="canvasMap" style="width: 50%; height: 100%;float:right"></div>
    </div>

</body>

</html>
<script>

// $('input[type=checkbox]').change(function(){
//     if($(this).is(':checked')){
// $('input[type=checkbox]').attr('disabled',true);
//     $(this).attr('disabled','');
// }
// else{
// $('input[type=checkbox]').attr('disabled','');
// }
// });
var check = $("#x");
check.on('click',checkStatus);
function checkStatus(){
    if($(check).is(':checked'))
    {
        $("#y").prop('disabled',true);
    }
    else
     $("#y").prop('disabled',false);
}

var checks = $("#y");
checks.on('click',checkStatus1);
function checkStatus1(){
    if($(checks).is(':checked'))
    {
        $("#x").prop('disabled',true);
    }
    else
     $("#x").prop('disabled',false);
}


    $(function(){
    $('.container_t input:checkbox').on('change',function() {
           var hide = this.name;
           console.log(hide);
           $("#legend_list [data-type='"+hide+"']").toggle();
    });
});
    document.getElementById('x').onchange = function () {
        var cart = document.getElementsByClassName('showme')[0];
        if (this.checked) cart.classList.remove('hide');
        else cart.classList.add('hide');
    }
    document.getElementById('y').onchange = function () {
        var cart1 = document.getElementsByClassName('PowerC')[0];
        if (this.checked) cart1.classList.remove('hide1');
        else cart1.classList.add('hide1');
    }

inlet_longs=[-95.36577791950545,
-95.46366429670309,
-95.35839870527784,
-95.3636425479564,
-95.35992051291285,
-95.35234683467759,
-95.33467318235415,
-95.33639868218921,
-95.3357208569561,
-95.33652734277139,
-95.3355446117371,
-95.32739880473369,
-95.32755967287737,
-95.34313391908204,
-95.33739694524824,
-95.33775834000846,
-95.33821792323538,
-95.33753413034906,
-95.333669225267,
-95.33836028305456,
-95.34312791768963,
-95.33849601340032,
-95.33455926090745,
-95.33551309631945,
-95.33732151179186,
-95.33639818982513,
-95.34288845557322,
-95.34307060907666,
-95.33847018172803,
-95.33836056951404,
-95.33554609275578,
-95.33550328704538,
-95.34313042453068,
-95.3429295862329,
-95.33639205759754,
-95.33379253267056,
-95.33736698864647,
-95.33748997254901,
-95.33452734437004,
-95.34312926465981,
-95.33472670570703,
-95.33363432830421,
-95.33472523699695,
-95.33655387987463,
-95.33550230383952,
-95.33731984751243,
-95.3375557333095,
-95.33649407295198,
-95.33638507039397,
-95.32756458893397,
-95.34290380300097,
-95.34314514154322,
-95.34310032976805,
-95.3363641061303,
-95.33655137665158,
-95.32756212395591,
-95.32747139413173,
-95.34310167415254,
-95.35009344561736,
-95.35245612981673,
-95.36351461371665,
-95.36347663501891,
-95.36589568121671,
-95.35585647154096,
-95.36603773786985,
-95.36847979085589,
-95.3646968355077,
-95.35730895235655,
-95.36881332454399,
-95.35483532203665,
-95.36260605735553,
-95.36503980270108,
-95.36107515155793,
-95.36231516171141,
-95.35856055109008,
-95.35892562836986,
-95.36489557393384,
-95.36479417003085,
-95.35275936751458,
-95.35510472781996,
-95.36858679018631,
-95.35890293896455,
-95.3613807124456,
-95.35501731499731,
-95.3525098822553,
-95.35866543911014,
-95.35284528499956,
-95.36600179364648,
-95.35044071304489,
-95.36271185023232,
-95.35438479833124,
-95.36651984655178,
-95.36407693588963,
-95.36255048391433,
-95.35053761936209,
-95.35256432906117,
-95.35450009700277,
-95.36388156478365,
-95.36609132058484,
-95.36419838408999,
-95.35016513694104,
-95.36173369428911,
-95.36648098457323,
-95.36397749890378,
-95.35027801193195,
-95.36423618441151,
-95.35424610503321,
-95.35180150429042,
-95.35166443983388,
-95.35411744298169,
-95.36526743005379,
-95.36561306549804,
-95.36324658948492,
-95.35537698146908,
-95.35194622908863,
-95.36542062972802,
-95.355704289342,
-95.35951410833316,
-95.36673185270091,
-95.36547038969712,
-95.35332510864325,
-95.3518263589364,
-95.35950669474718,
-95.35547003926284,
-95.35933271355854,
-95.3632928022082,
-95.3514640841569,
-95.3534170461894,
-95.36675057633491,
-95.36458980033474,
-95.36694941983407,
-95.35096813763136,
-95.364699848116,
-95.35295988640972,
-95.36875334925993,
-95.36845416072556,
-95.35104853417133,
-95.36686250388058,
-95.35316049013592,
-95.35468162496244,
-95.35078463363263,
-95.35850839083913,
-95.36480871241346,
-95.36445356446573,
-95.368553366366,
-95.36820719055989,
-95.35449958880459,
-95.36708786331928,
-95.36479554995034,
-95.35483330570317,
-95.35114863703105,
-95.36454464410582,
-95.35830319529883,
-95.36831002948944,
-95.35100852718013,
-95.35459621301314,
-95.35993140313724,
-95.35840005105094,
-95.36804453502694,
-95.35597792697051,
-95.3673415225802,
-95.35976056838547,
-95.35256170689884,
-95.36762377349413,
-95.3538621883647,
-95.36732564069492,
-95.35242422304242,
-95.36775723578299,
-95.36012446161644,
-95.36772073205779,
-95.35395603004503,
-95.36735864078864,
-95.35361106715797,
-95.36517957513934,
-95.3599524091743,
-95.36528972643278,
-95.35166060615046,
-95.35529595524994,
-95.36736274596733,
-95.35371025908104,
-95.36538614287969,
-95.36755853827212,
-95.35512479341281,
-95.35174996513767,
-95.36742859200763,
-95.3688265706381,
-95.36766924043798,
-95.35141984618426,
-95.3653884889204,
-95.3670253730782,
-95.35149107536625,
-95.36781342168452,
-95.36652132159813,
-95.35314609554324,
-95.3681734661506,
-95.36829179508838,
-95.35690413836117,
-95.35295204174656,
-95.36660149586879,
-95.35200500028583,
-95.36790178105598,
-95.35665666582537,
-95.3544265575335,
-95.35661651845537,
-95.36794431497404,
-95.35181192965294,
-95.3663496676712,
-95.35666583375136,
-95.35427872895342,
-95.35678819979191,
-95.368284772169,
-95.36576170841842,
-95.35215958809151,
-95.36790103686337,
-95.36830587264161,
-95.36207368441383,
-95.3658781975049,
-95.36811056450695,
-95.3681305740338,
-95.36604014954108,
-95.35198657825036,
-95.35685203179197,
-95.3656327867775,
-95.36597634590292,
-95.35690024403735,
-95.35968757729695,
-95.36209923353664,
-95.35235051906974,
-95.3557729243251,
-95.35704150513385,
-95.3659778109465,
-95.34319821681163,
-95.34554764019805,
-95.34313617901238,
-95.34566042287021,
-95.34330085489071,
-95.34251105795818,
-95.33583664499822,
-95.33553695399031,
-95.34389303865272,
-95.33132272211905,
-95.33552685878665,
-95.34397377161613,
-95.33583925277945,
-95.33942842057367,
-95.33841151315393,
-95.338660621015,
-95.33956564594465,
-95.3429790368435,
-95.33659030509683,
-95.33649078800875,
-95.34483727559201,
-95.33840777963566,
-95.33866212559332,
-95.3443494959521,
-95.34365764159273,
-95.32892292363037,
-95.32884605132973,
-95.34201835045462,
-95.3394194137247,
-95.33956209340201,
-95.32746903583218,
-95.32743868985888,
-95.34288990795619,
-95.34368830848189,
-95.33467922085333,
-95.33474102950812,
-95.34239203881324,
-95.34284033677743,
-95.34514669695255,
-95.33387721584289,
-95.33551801056694,
-95.33369216446528,
-95.34284500620012,
-95.33582006507267,
-95.3366507743271,
-95.33739486493644,
-95.3358190089245,
-95.34532169834009,
-95.33551662136065,
-95.33763629294049,
-95.33467438015593,
-95.33473815822045,
-95.33665021025466,
-95.33839940345558,
-95.33861558810865,
-95.33763266651437,
-95.33932321060936,
-95.3373977479297,
-95.33958808968903,
-95.33996904393972,
-95.33843064286924,
-95.32758329333535,
-95.33940964356346,
-95.33953627479818]
inlet_lats=[29.76202573052496,
29.66195912051669,
29.76180333548514,
29.76193421967339,
29.76182920109132,
29.76160567466023,
29.76490697314338,
29.76492761746867,
29.76490481697553,
29.76492673086316,
29.76489504442764,
29.76464007042473,
29.76463897750374,
29.76505124125511,
29.76487856373619,
29.76486844693903,
29.76486371405974,
29.76483444094857,
29.76472817663142,
29.76484261911155,
29.76497238798836,
29.76483266870122,
29.76470740812594,
29.76464876011773,
29.7646784031006,
29.76462509293084,
29.76475564773513,
29.7647589688113,
29.76459276902453,
29.76458910858158,
29.76418688250238,
29.76418461063824,
29.76437486069651,
29.76436497643054,
29.76416379640611,
29.76408773077183,
29.76416734213685,
29.76416740253866,
29.76408637652392,
29.76431925154586,
29.76408467698773,
29.76404983449148,
29.76402025540906,
29.76406587007226,
29.76400134280941,
29.76400482264243,
29.76400466877455,
29.76378194463023,
29.76377896358074,
29.76346922755823,
29.76369459044466,
29.76370062799112,
29.76364877961505,
29.76336183273783,
29.76336310193338,
29.76278461761733,
29.76278213097944,
29.76306607745261,
29.76153439546373,
29.76158278834335,
29.76186086237888,
29.76184448453671,
29.7619067655463,
29.76163069642925,
29.76188475583968,
29.76032437971697,
29.76021948314198,
29.76000073476261,
29.76030920825673,
29.75992610502438,
29.76012100437856,
29.76017037492541,
29.7600579680542,
29.76007238541062,
29.7599555222719,
29.75995774154615,
29.76009674293846,
29.76009399194751,
29.75975170454548,
29.75981095575274,
29.76017100358601,
29.75988669063587,
29.75994300651143,
29.75973441636979,
29.75966186777778,
29.75980869929856,
29.75964122556796,
29.75997324373448,
29.75954966995587,
29.75987790542375,
29.75963181080295,
29.7599507661245,
29.7598376131749,
29.7597871315628,
29.75943235065591,
29.75947016842832,
29.75950460394682,
29.75971308909796,
29.75976161679439,
29.75971006058096,
29.7593022428742,
29.75961252627849,
29.75969596262241,
29.75959030186522,
29.75921452312718,
29.75957714749319,
29.75929655958588,
29.75936691449994,
29.7591425900215,
29.75903298055284,
29.75939476262175,
29.75910747188978,
29.75919620191367,
29.75938209261826,
29.75934692689337,
29.75901418048482,
29.75894832491818,
29.75910355454058,
29.75899159503411,
29.75903059293442,
29.75913210298315,
29.75880584951407,
29.75885599997713,
29.75921529363212,
29.75914473530314,
29.75919558918033,
29.75875128540256,
29.75912286331995,
29.75879901362505,
29.75919396121309,
29.75918486983428,
29.75869681956332,
29.75912352045522,
29.75873370325102,
29.75876573143353,
29.75864503616695,
29.75881999559349,
29.75899026407956,
29.75895001640249,
29.75905885083584,
29.75902383632531,
29.75865023523412,
29.75898741999668,
29.75886604019207,
29.75858610126819,
29.75848326644497,
29.75884081581,
29.75866749499446,
29.75889256225661,
29.75839801012121,
29.75846978350704,
29.75858353359847,
29.75853366085557,
29.75875636600625,
29.75838580563267,
29.75868477882227,
29.75847544035907,
29.75826257802659,
29.75865618035364,
29.75824107262273,
29.75859232853653,
29.75817011373964,
29.7585852325437,
29.75833400426959,
29.75852762139656,
29.75811768194625,
29.75847332008443,
29.75809384479644,
29.75839385490004,
29.75824238619766,
29.7583639117996,
29.75795794338212,
29.75803929086275,
29.75834740637322,
29.75796902201261,
29.75824382121069,
29.75830040833671,
29.75794053791965,
29.75784668588238,
29.75827030016476,
29.75830768601102,
29.75827260582238,
29.75781271755252,
29.75813021187663,
29.75814473754006,
29.75770790447442,
29.75808689907005,
29.75805077329172,
29.75759601929546,
29.75793771680559,
29.75793534735415,
29.75759769567246,
29.75748154055157,
29.75784736118244,
29.75744511397538,
29.75787609503447,
29.75755189572998,
29.75748462193808,
29.75752824274245,
29.75782869531323,
29.75737712531084,
29.75773897579062,
29.75747180556148,
29.75740356046071,
29.75747128195025,
29.75772512076306,
29.75764677888407,
29.7572666327989,
29.7576905252544,
29.75769927971955,
29.75752467765598,
29.75761709026475,
29.75762300020948,
29.75759644901048,
29.7575348445635,
29.75714911572783,
29.75727326924917,
29.75747362564245,
29.75748165123608,
29.75721239967087,
29.75727414826319,
29.75733882937858,
29.75705942669631,
29.75715147208414,
29.75715956351186,
29.75739022723511,
29.76853456938109,
29.76846573169858,
29.76834743450062,
29.768413879857,
29.76831065811852,
29.76827919454813,
29.76807150609106,
29.76805670630682,
29.76825968722386,
29.76789184828027,
29.76800415376654,
29.76822447145691,
29.76799894114281,
29.76805908680174,
29.76802909739383,
29.76802985233725,
29.76804907945659,
29.76812138524071,
29.76793253723232,
29.76792871534835,
29.76811761858101,
29.76793985110879,
29.76793524649473,
29.76808890250189,
29.76807002248127,
29.76762636239197,
29.76762425643607,
29.76798345358122,
29.7679058649933,
29.76790205906441,
29.76755845172819,
29.76747287786104,
29.76788068477855,
29.76784799886577,
29.76784149122559,
29.76772804813151,
29.76747084731782,
29.76746401742293,
29.76770263570886,
29.76745875741187,
29.76745879791942,
29.76765853985162,
29.76764491551312,
29.76765503296512,
29.76734601844287,
29.76739035704274,
29.7673354511214,
29.76758506317064,
29.76739201545095,
29.7673905206382,
29.76737729794689,
29.76733365766622,
29.76759262190108,
29.76732373610293,
29.76736353847845,
29.76727758491206,
29.76727547767248,
29.76731841959574,
29.76736513738953,
29.76735178585118,
29.76731504259278,
29.76735296375643,
29.76729703710108,
29.7673359888039,
29.76733594134087,
29.76725043361397,
29.76689024937949,
29.76721170436197,
29.76719810570113
]

lonmx=Math.max.apply(null, inlet_longs)
lonmi=Math.min.apply(null, inlet_longs)
latmx=Math.max.apply(null, inlet_lats)
latmi=Math.min.apply(null, inlet_lats)



            var len = 294;
            var points = [];
            var max = 100;
            var width = 250;
            var height = 250;

            var latMin = 29.251095;
            var latMax = 29.666357;
            var lonMin = -95.651095;
            var lonMax = -95.266357;

            var latMin =  29.151095;
            var latMax =  29.766357;
            var lonMin = -95.851095;
            var lonMax = -94.366357;
            

            var dataRaw = [];
            for (var i = 0; i < 1; i++) {
                var tmp=Math.floor(Math.random() * 100)
                var point = {
                    lat: inlet_lats[i],
                    lon: inlet_longs[i],
                    value: tmp
                };
                
                dataRaw.push(point);
                console.log(tmp);
            }

            for (var i = 0; i < 1; i++) {
                var dataItem = dataRaw[i];
                var point = {
                    x: Math.floor((dataItem.lat - latMin) / (latMax - latMin) * width),
                    y: Math.floor((dataItem.lon - lonMin) / (lonMax - lonMin) * height),
                    value: Math.floor(dataItem.value)
                };

                max = Math.max(max, dataItem.value);
                points.push(point);
            }

            var heatmapInstance = h337.create({
                container: document.querySelector('#heatmap')
            });

            var data = {
                max: max,
                data: points
            };

            heatmapInstance.setData(data);


         //   var viewer = new Cesium.Viewer('cesiumContainer');

            viewer._cesiumWidget._creditContainer.style.display = "none";

            var canvas = document.getElementsByClassName('heatmap-canvas');
            console.log(canvas);
            viewer.entities.add({
                name: 'heatmap',
                rectangle: {
                    coordinates: Cesium.Rectangle.fromDegrees(lonMin, latMin, lonMax, latMax),
                    material: new Cesium.ImageMaterialProperty({
                        image: canvas[0],
                        transparent: true
                    })

                }
            });

            viewer.zoomTo(viewer.entities);
     </script>

